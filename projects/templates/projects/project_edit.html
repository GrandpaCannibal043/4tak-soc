{% extends "projects/base.html" %}
{% block title %}Upraviť projekt{% endblock %}

{% block content %}
<div class="card p-4">

    <h2>Úprava projektu: {{ project.title }}</h2>

    <p class="text-muted">
        Úprava musí byť schválená administrátorom.
        Pôvodný projekt zostane viditeľný, kým nebude schválená.
    </p>

    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="mb-3">
            <label class="form-label">Názov</label>
            <input type="text" name="title" class="form-control"
                   value="{{ project.title }}" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Popis</label>
            <textarea name="functionality" class="form-control"
                      rows="4" required>{{ project.functionality }}</textarea>
        </div>

        <div class="mb-3">
            <label class="form-label">Typ projektu</label>
            <select name="project_type" class="form-select">
                {% for key, label in project.PROJECT_TYPE_CHOICES %}
                    <option value="{{ key }}"
                        {% if project.project_type == key %}selected{% endif %}>
                        {{ label }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label">Náročnosť</label>
            <select name="difficulty" class="form-select">
                {% for i in "12345" %}
                    <option value="{{ i }}"
                        {% if project.difficulty == i|add:"0" %}selected{% endif %}>
                        {{ i }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label">Nový obrázok (voliteľné)</label>
            <input type="file" name="image" class="form-control">
        </div>

        <button type="submit" class="btn btn-primary">
            Odoslať úpravu na schválenie
        </button>

        <a href="{% url 'project_detail' project.pk %}"
           class="btn btn-secondary ms-2">
            Zrušiť
        </a>

    </form>

</div>
{% endblock %}
